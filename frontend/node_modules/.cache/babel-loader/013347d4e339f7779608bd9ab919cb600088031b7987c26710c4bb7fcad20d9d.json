{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./ImageUploader.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ImageUploader=()=>{const[selectedFiles,setSelectedFiles]=useState([]);const[uploadedImages,setUploadedImages]=useState([]);const fetchImages=async()=>{try{const response=await axios.get('https://mrrapo.onrender.com/images');setUploadedImages(response.data);}catch(error){console.error('Error fetching images:',error);}};useEffect(()=>{fetchImages();},[]);const handleFileChange=e=>{if(e.target.files.length>6){alert('You can only upload up to 6 images');return;}setSelectedFiles(e.target.files);};const handleUpload=async()=>{const formData=new FormData();Array.from(selectedFiles).forEach(file=>{formData.append('images',file);});try{await axios.post('https://mrrapo.onrender.com/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});fetchImages();setSelectedFiles([]);}catch(error){console.error('Error uploading images:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file-input\",multiple:true,onChange:handleFileChange,style:{display:'none'}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-input\",className:\"file-label\",children:\"Select Slide Image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-container\",children:Array.from(selectedFiles).map((file,index)=>/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:\"Preview \".concat(index),className:\"preview-image\"},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,disabled:selectedFiles.length===0,className:\"upload-button \".concat(selectedFiles.length===0?'disabled':''),children:selectedFiles.length===0?'Select 5 to 6 Images':\"Upload \".concat(selectedFiles.length,\" \").concat(selectedFiles.length>1?'Images':'Image')}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:uploadedImages.map((slide,index)=>slide.images.map((image,idx)=>/*#__PURE__*/_jsx(\"img\",{src:\"https://mrrapo.onrender.com\".concat(image),alt:\"Slide \".concat(index,\"-\").concat(idx),className:\"gallery-image\"},idx)))})]});};export default ImageUploader;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ImageUploader","selectedFiles","setSelectedFiles","uploadedImages","setUploadedImages","fetchImages","response","get","data","error","console","handleFileChange","e","target","files","length","alert","handleUpload","formData","FormData","Array","from","forEach","file","append","post","headers","className","children","type","id","multiple","onChange","style","display","htmlFor","map","index","src","URL","createObjectURL","alt","concat","onClick","disabled","slide","images","image","idx"],"sources":["D:/useless/eco - Copy (2) - Copy/frontend/src/Admin/ImageUploader.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './ImageUploader.css';\r\n\r\nconst ImageUploader = () => {\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [uploadedImages, setUploadedImages] = useState([]);\r\n\r\n\r\n  const fetchImages = async () => {\r\n    try {\r\n      const response = await axios.get('https://mrrapo.onrender.com/images');\r\n      setUploadedImages(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching images:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchImages();\r\n  }, []);\r\n\r\n  const handleFileChange = (e) => {\r\n    if (e.target.files.length > 6) {\r\n      alert('You can only upload up to 6 images');\r\n      return;\r\n    }\r\n    setSelectedFiles(e.target.files);\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    const formData = new FormData();\r\n    Array.from(selectedFiles).forEach(file => {\r\n      formData.append('images', file);\r\n    });\r\n\r\n    try {\r\n      await axios.post('https://mrrapo.onrender.com/upload', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n      fetchImages(); \r\n      setSelectedFiles([]); \r\n    } catch (error) {\r\n      console.error('Error uploading images:', error);\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  return (\r\n    <div className=\"upload-container\">\r\n      <input\r\n        type=\"file\"\r\n        id=\"file-input\"\r\n        multiple\r\n        onChange={handleFileChange}\r\n        style={{ display: 'none' }}\r\n      />\r\n      <label htmlFor=\"file-input\" className=\"file-label\">\r\n        Select Slide Image\r\n      </label>\r\n\r\n      <div className=\"preview-container\">\r\n        {Array.from(selectedFiles).map((file, index) => (\r\n          <img\r\n            key={index}\r\n            src={URL.createObjectURL(file)}\r\n            alt={`Preview ${index}`}\r\n            className=\"preview-image\"\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleUpload}\r\n        disabled={selectedFiles.length === 0}\r\n        className={`upload-button ${selectedFiles.length === 0 ? 'disabled' : ''}`}\r\n      >\r\n        {selectedFiles.length === 0 \r\n          ? 'Select 5 to 6 Images'\r\n          : `Upload ${selectedFiles.length} ${selectedFiles.length > 1 ? 'Images' : 'Image'}`}\r\n      </button>\r\n\r\n      <div className=\"gallery\">\r\n        {uploadedImages.map((slide, index) => (\r\n          slide.images.map((image, idx) => (\r\n            <img\r\n              key={idx}\r\n              src={`https://mrrapo.onrender.com${image}`}\r\n              alt={`Slide ${index}-${idx}`}\r\n              className=\"gallery-image\"\r\n            />\r\n          ))\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUploader;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}